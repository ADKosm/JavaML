group 'com.javaml'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'application'

sourceCompatibility = 1.8

mainClassName = 'com.javaml.Main'

repositories {
    mavenCentral()
}

task runMain(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    if(project.hasProperty('appArgs')){
        args = Eval.me(appArgs)
    }
    main = 'com.javaml.Main'
}

task downloadData {
    if (! new File('dataset').exists()) {
        "wget http://kosmose.me/data/cvc/dataset.tar.gz".execute().waitFor()
        "tar -xzf dataset.tar.gz".execute().waitFor()
    }
}

runMain.dependsOn downloadData

dependencies {
    compile group: 'com.sparkjava', name: 'spark-core', version: '2.7.2'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}
